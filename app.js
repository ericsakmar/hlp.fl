// Generated by CoffeeScript 1.6.3
(function(){this.app=angular.module("app",[]);this.app.run(["$rootScope",function(e){return e.appName="hlpr"}]);this.app.factory("Projects",function(){var e,t;e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;t=e.open("hlpr",2);t.onerror=function(e){return console.log(e)};t.onsuccess=function(e){this.db=t.result;return this.db.onerror=function(e){return console.log(e)}};t.onupgradeneeded=function(e){var t,n;t=e.target.result;return n=t.createObjectStore("projects",{keyPath:"name"})};return{db:this.db,find:function(e){console.log(this.db);return this.db.transaction(["hlpr"]).objectStore("projects").get(e).onsuccess=function(e){return console.log(t)}},getOrCreate:function(e){return this.find(e)}}});this.app.controller("TaskListController",["$scope","Projects",function(e,t){var n,r,i;e.createTask=function(){var s,o,u,a;u=r(e.newTask);o=t.getOrCreate(u);a=i(e.newTask);return s=n(e.newTask)};r=function(e){return/^\@[\w>\-]+/.exec(e)[0]};i=function(e){return/\s[\w\s]+!?$/.exec(e)[0].replace(/(^\s)|(!$)/g,"")};return n=function(e){return e.indexOf("!")===e.length-1}}])}).call(this);